{# ---- ШАБЛОН ------------------------------------------------------------ #}
{% extends Template('user/base.html.twig') %}

{% block title %}Авторизация{% endblock %}

{# ---- КОНТЕНТ-БЛОК ------------------------------------------------------------ #}
{% block content %}
    {{ include(_self|replace({ "template.html.twig":baks_settings.device~"/content.html.twig" })) }}
{% endblock %}

{% block javascript %}
<script nonce='{{ csp_nonce() }}'>

document.addEventListener("DOMContentLoaded", () => {
    const second = document.getElementById('second');

    // Функция для обновления обратного отсчета
    function updateCountdown() {
        // Уменьшаем счетчик на секунду
        const countdownSeconds = (second.innerText)--;

        if (countdownSeconds < 12)
            {
                second.classList.add('text-danger');
            }

        // Проверяем, если время вышло, то останавливаем обратный отсчет
        if (countdownSeconds > 0)
        {
            return;
        }

        clearInterval(intervalId);
        second.innerText = 'Время истекло!';
    }

    // Обновляем счетчик каждую секунду
    const intervalId = setInterval(updateCountdown, 1000);

  });

</script>

{% endblock %}